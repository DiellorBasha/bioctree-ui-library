{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"bioctree UI Library","text":"<p>Welcome to the bioctree UI Library documentation! This library provides custom UI components built with D3.js for seamless integration with MATLAB.</p>"},{"location":"#overview","title":"Overview","text":"<p>The bioctree UI Library is a collection of interactive, data-driven UI components that bridge the gap between MATLAB's powerful computational capabilities and D3.js's sophisticated visualization framework. Each component is designed as a MATLAB class that embeds HTML, CSS, and JavaScript to create rich, interactive user interfaces.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>\ud83c\udfa8 Rich Visualizations - Leverage D3.js for sophisticated data visualizations</li> <li>\ud83d\udd04 Bidirectional Communication - Seamless data flow between MATLAB and JavaScript</li> <li>\ud83d\udce6 Component-Based Architecture - Modular, reusable components</li> <li>\ud83e\uddea Comprehensive Testing - Both MATLAB and browser-based test suites</li> <li>\ud83d\udcda Well-Documented - Extensive documentation and examples</li> <li>\ud83d\udd12 Version Management - Explicit dependency versioning to prevent conflicts</li> </ul>"},{"location":"#components","title":"Components","text":""},{"location":"#d3brush","title":"d3Brush","text":"<p>An interactive brush component for selecting ranges on a continuous scale with snapping support.</p> <p>View Documentation \u2192</p>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code>% Create a figure\nfig = uifigure('Position', [100 100 600 300]);\n\n% Create a d3Brush component\nbrush = d3Brush(fig, 'Position', [50 50 500 200]);\n\n% Configure properties\nbrush.Min = 0;\nbrush.Max = 100;\nbrush.SnapInterval = 5;\nbrush.Value = [20, 60];\n\n% Set up callback\nbrush.ValueChangedFcn = @(src, event) disp(event.Value);\n</code></pre>"},{"location":"#architecture","title":"Architecture","text":"<p>Each component follows a standardized structure:</p> <ul> <li>MATLAB Class - Extends <code>ComponentContainer</code> for MATLAB integration</li> <li>HTML Template - Shadow DOM-like encapsulation</li> <li>CSS Styles - Component-specific styling</li> <li>Controller (JS) - Lifecycle management and MATLAB communication</li> <li>Renderer (JS) - Pure D3.js visualization logic</li> <li>Vendor Dependencies - Component-specific bundled libraries</li> </ul>"},{"location":"#project-structure","title":"Project Structure","text":"<pre><code>bioctree-ui-library/\n\u251c\u2500\u2500 components/           # Component implementations\n\u2502   \u2514\u2500\u2500 @d3Brush/        # d3Brush component\n\u2502       \u251c\u2500\u2500 d3Brush.m    # MATLAB class\n\u2502       \u251c\u2500\u2500 d3Brush.html # HTML template\n\u2502       \u251c\u2500\u2500 d3Brush.css  # Styles\n\u2502       \u251c\u2500\u2500 d3Brush.js   # Controller\n\u2502       \u251c\u2500\u2500 d3Brush.render.js  # Renderer\n\u2502       \u2514\u2500\u2500 vendor/      # Bundled dependencies\n\u251c\u2500\u2500 lib/                 # Shared libraries\n\u251c\u2500\u2500 tests/              # Test suites\n\u2502   \u251c\u2500\u2500 html/           # Browser-based tests\n\u2502   \u2514\u2500\u2500 matlab/         # MATLAB unit tests\n\u251c\u2500\u2500 docs/               # Documentation\n\u2514\u2500\u2500 manifest.json       # Dependency tracking\n</code></pre>"},{"location":"#getting-started","title":"Getting Started","text":"<p>Ready to dive in? Check out our guides:</p> <ul> <li>Installation Guide - Set up the library</li> <li>Quick Start Tutorial - Build your first component</li> <li>Architecture Overview - Understand the design</li> </ul>"},{"location":"#contributing","title":"Contributing","text":"<p>We welcome contributions! See our Contributing Guide for details on:</p> <ul> <li>Adding new components</li> <li>Testing requirements</li> <li>Documentation standards</li> <li>Code style guidelines</li> </ul>"},{"location":"#support","title":"Support","text":"<ul> <li>Issues: GitHub Issues</li> <li>Documentation: This site</li> <li>Examples: Examples Section</li> </ul>"},{"location":"#license","title":"License","text":"<p>[Your License Here]</p>"},{"location":"components/","title":"Components Overview","text":"<p>The bioctree UI Library provides a collection of interactive components designed for MATLAB integration with D3.js visualizations.</p>"},{"location":"components/#available-components","title":"Available Components","text":""},{"location":"components/#d3brush","title":"d3Brush","text":"<p>An interactive brush component for range selection with snapping support.</p> <p>Key Features: - Adjustable min/max range - Configurable snap intervals - Real-time value updates - Multiple event types - Smooth D3 animations</p> <p>View Full Documentation \u2192</p>"},{"location":"components/#coming-soon","title":"Coming Soon","text":"<p>More components are in development. Check back for updates!</p>"},{"location":"components/#component-architecture","title":"Component Architecture","text":"<p>All components follow a standardized architecture:</p> <pre><code>@ComponentName/\n\u251c\u2500\u2500 ComponentName.m          # MATLAB class\n\u251c\u2500\u2500 ComponentName.html       # HTML template\n\u251c\u2500\u2500 ComponentName.css        # Styles\n\u251c\u2500\u2500 ComponentName.js         # Controller (lifecycle)\n\u251c\u2500\u2500 ComponentName.render.js  # Renderer (visualization)\n\u251c\u2500\u2500 ComponentName.utils.js   # Optional utilities\n\u251c\u2500\u2500 vendor/                  # Component dependencies\n\u2502   \u2514\u2500\u2500 d3.v5.9.2.min.js\n\u2514\u2500\u2500 README.md               # Component documentation\n</code></pre>"},{"location":"components/#file-responsibilities","title":"File Responsibilities","text":"File Purpose <code>.m</code> MATLAB class extending <code>ComponentContainer</code>, handles property management and events <code>.html</code> HTML template, loads scripts and defines structure <code>.css</code> Component-specific styles <code>.js</code> Controller - manages lifecycle, data flow, MATLAB communication <code>.render.js</code> Renderer - pure D3.js visualization logic <code>.utils.js</code> Optional helpers and utility functions <code>vendor/</code> Bundled dependencies with explicit version numbers"},{"location":"components/#communication-pattern","title":"Communication Pattern","text":"<p>Components use bidirectional communication between MATLAB and JavaScript:</p>"},{"location":"components/#matlab-javascript","title":"MATLAB \u2192 JavaScript","text":"<pre><code>% Update component data\ncomp.HTMLComponent.Data = struct('min', 0, 'max', 100);\n</code></pre>"},{"location":"components/#javascript-matlab","title":"JavaScript \u2192 MATLAB","text":"<pre><code>// Dispatch custom event to MATLAB\nhtmlComponent.dispatchEvent(new CustomEvent('ValueChanged', {\n    detail: JSON.stringify({ selection: [20, 60] })\n}));\n</code></pre>"},{"location":"components/#common-properties","title":"Common Properties","text":"<p>Most components share these standard properties:</p> Property Type Description <code>Position</code> <code>[x y width height]</code> Component position in parent <code>Visible</code> <code>on \\| off</code> Visibility state <code>Enable</code> <code>on \\| off</code> Enable/disable interaction"},{"location":"components/#events","title":"Events","text":"<p>Components typically support these event types:</p> Event When Fired <code>ValueChanging</code> During interaction (throttled) <code>ValueChanged</code> On interaction completion Component-specific E.g., <code>BrushStarted</code>, <code>BrushEnded</code>"},{"location":"components/#creating-custom-components","title":"Creating Custom Components","text":"<p>Want to create your own component? See our Component Structure Guide for detailed instructions.</p>"},{"location":"components/d3brush/","title":"d3Brush Component","text":"<p>An interactive brush component for selecting ranges on a continuous scale with snapping support. Based on the D3 Brush Snapping example.</p>"},{"location":"components/d3brush/#overview","title":"Overview","text":"<p>The <code>d3Brush</code> component provides a visual interface for selecting a numeric range with automatic snapping to specified intervals. It's ideal for filtering data, selecting time ranges, or any scenario requiring bounded numeric input with visual feedback.</p>"},{"location":"components/d3brush/#installation","title":"Installation","text":"<p>The d3Brush component is included in the bioctree UI Library. Ensure the component directory is on your MATLAB path:</p> <pre><code>addpath(genpath('path/to/bioctree-ui-library/components'));\n</code></pre>"},{"location":"components/d3brush/#basic-usage","title":"Basic Usage","text":""},{"location":"components/d3brush/#simple-example","title":"Simple Example","text":"<pre><code>% Create a figure\nfig = uifigure('Position', [100 100 600 300]);\n\n% Create brush component\nbrush = d3Brush(fig, 'Position', [50 50 500 200]);\n\n% Access current selection\ndisp(brush.Value);  % [20 60] (default)\n</code></pre>"},{"location":"components/d3brush/#with-callbacks","title":"With Callbacks","text":"<pre><code>% Create figure and brush\nfig = uifigure('Position', [100 100 600 300]);\nbrush = d3Brush(fig, 'Position', [50 50 500 200]);\n\n% Set up event callbacks\nbrush.ValueChangedFcn = @(src, event) fprintf('Selection: [%.1f, %.1f]\\n', ...\n    event.Value(1), event.Value(2));\n\nbrush.BrushStartedFcn = @(src, event) disp('Brush started');\nbrush.BrushEndedFcn = @(src, event) disp('Brush ended');\n</code></pre>"},{"location":"components/d3brush/#properties","title":"Properties","text":""},{"location":"components/d3brush/#min","title":"Min","text":"<ul> <li>Type: <code>double</code> (scalar)</li> <li>Default: <code>0</code></li> <li>Description: Minimum value of the range</li> </ul> <pre><code>brush.Min = -50;\n</code></pre>"},{"location":"components/d3brush/#max","title":"Max","text":"<ul> <li>Type: <code>double</code> (scalar)</li> <li>Default: <code>100</code></li> <li>Description: Maximum value of the range</li> </ul> <pre><code>brush.Max = 200;\n</code></pre>"},{"location":"components/d3brush/#snapinterval","title":"SnapInterval","text":"<ul> <li>Type: <code>double</code> (scalar, positive)</li> <li>Default: <code>5</code></li> <li>Description: Interval to which brush handles snap</li> </ul> <p>The brush handles will automatically snap to the nearest multiple of this value.</p> <pre><code>brush.SnapInterval = 10;  % Snap to multiples of 10\n</code></pre>"},{"location":"components/d3brush/#value","title":"Value","text":"<ul> <li>Type: <code>double</code> (1x2 array)</li> <li>Default: <code>[20 60]</code></li> <li>Description: Current brush selection <code>[start, stop]</code></li> </ul> <p>The Value property is automatically: - Sorted: <code>[80, 40]</code> becomes <code>[40, 80]</code> - Clamped: Values are constrained to <code>[Min, Max]</code> range</p> <pre><code>% Set value\nbrush.Value = [30, 70];\n\n% Read value\ncurrentSelection = brush.Value;\n\n% Automatically sorted\nbrush.Value = [90, 10];\ndisp(brush.Value);  % [10 90]\n\n% Automatically clamped\nbrush.Min = 0;\nbrush.Max = 100;\nbrush.Value = [-10, 120];\ndisp(brush.Value);  % [0 100]\n</code></pre>"},{"location":"components/d3brush/#events","title":"Events","text":""},{"location":"components/d3brush/#valuechanging","title":"ValueChanging","text":"<p>Fires continuously during brush dragging (throttled to ~50ms intervals).</p> <p>Event Data: - <code>Value</code> - Current selection <code>[start, stop]</code> - <code>PreviousValue</code> - Previous selection</p> <pre><code>brush.ValueChangingFcn = @(src, event) fprintf('Changing: [%.1f, %.1f]\\n', ...\n    event.Value(1), event.Value(2));\n</code></pre>"},{"location":"components/d3brush/#valuechanged","title":"ValueChanged","text":"<p>Fires when brush interaction completes (on mouse release).</p> <p>Event Data: - <code>Value</code> - Final selection <code>[start, stop]</code> - <code>PreviousValue</code> - Previous selection</p> <pre><code>brush.ValueChangedFcn = @(src, event) fprintf('Changed: [%.1f, %.1f]\\n', ...\n    event.Value(1), event.Value(2));\n</code></pre>"},{"location":"components/d3brush/#brushstarted","title":"BrushStarted","text":"<p>Fires when brush interaction begins.</p> <pre><code>brush.BrushStartedFcn = @(src, event) disp('Started dragging');\n</code></pre>"},{"location":"components/d3brush/#brushended","title":"BrushEnded","text":"<p>Fires when brush interaction ends.</p> <pre><code>brush.BrushEndedFcn = @(src, event) disp('Finished dragging');\n</code></pre>"},{"location":"components/d3brush/#advanced-examples","title":"Advanced Examples","text":""},{"location":"components/d3brush/#custom-range-with-fine-snapping","title":"Custom Range with Fine Snapping","text":"<pre><code>fig = uifigure('Position', [100 100 600 300], 'Name', 'Temperature Range');\nbrush = d3Brush(fig, 'Position', [50 50 500 200]);\n\n% Configure for temperature range\nbrush.Min = -20;\nbrush.Max = 40;\nbrush.SnapInterval = 0.5;  % Snap to 0.5\u00b0C\nbrush.Value = [18, 25];    % Room temperature range\n\n% Display selection\nbrush.ValueChangedFcn = @(src, event) fprintf('Temperature range: %.1f\u00b0C to %.1f\u00b0C\\n', ...\n    event.Value(1), event.Value(2));\n</code></pre>"},{"location":"components/d3brush/#multiple-brushes-for-data-filtering","title":"Multiple Brushes for Data Filtering","text":"<pre><code>fig = uifigure('Position', [100 100 600 500], 'Name', 'Multi-Range Filter');\n\n% Age range brush\nageBrush = d3Brush(fig, 'Position', [50 350 500 100]);\nageBrush.Min = 0;\nageBrush.Max = 100;\nageBrush.SnapInterval = 1;\nageBrush.Value = [25, 65];\n\n% Income range brush\nincomeBrush = d3Brush(fig, 'Position', [50 150 500 100]);\nincomeBrush.Min = 0;\nincomeBrush.Max = 200000;\nincomeBrush.SnapInterval = 5000;\nincomeBrush.Value = [30000, 100000];\n\n% Combined filter callback\nfilterData = @(~, ~) fprintf('Age: [%d, %d], Income: [$%d, $%d]\\n', ...\n    round(ageBrush.Value), round(incomeBrush.Value));\n\nageBrush.ValueChangedFcn = filterData;\nincomeBrush.ValueChangedFcn = filterData;\n</code></pre>"},{"location":"components/d3brush/#interactive-configuration","title":"Interactive Configuration","text":"<pre><code>fig = uifigure('Position', [100 100 600 400], 'Name', 'Interactive Brush');\n\n% Create brush\nbrush = d3Brush(fig, 'Position', [50 200 500 150]);\n\n% Create controls\nminField = uieditfield(fig, 'numeric', 'Position', [150 160 100 22], ...\n    'Value', 0, 'ValueChangedFcn', @(src, ~) set(brush, 'Min', src.Value));\nmaxField = uieditfield(fig, 'numeric', 'Position', [150 120 100 22], ...\n    'Value', 100, 'ValueChangedFcn', @(src, ~) set(brush, 'Max', src.Value));\nsnapField = uieditfield(fig, 'numeric', 'Position', [150 80 100 22], ...\n    'Value', 5, 'ValueChangedFcn', @(src, ~) set(brush, 'SnapInterval', src.Value));\n\nuilabel(fig, 'Position', [50 160 90 22], 'Text', 'Min:');\nuilabel(fig, 'Position', [50 120 90 22], 'Text', 'Max:');\nuilabel(fig, 'Position', [50 80 90 22], 'Text', 'Snap Interval:');\n\n% Display current selection\nvalueLabel = uilabel(fig, 'Position', [50 40 500 22], ...\n    'Text', sprintf('Selection: [%.1f, %.1f]', brush.Value(1), brush.Value(2)));\n\nbrush.ValueChangedFcn = @(src, event) set(valueLabel, 'Text', ...\n    sprintf('Selection: [%.1f, %.1f]', event.Value(1), event.Value(2)));\n</code></pre>"},{"location":"components/d3brush/#programmatic-animation","title":"Programmatic Animation","text":"<pre><code>fig = uifigure('Position', [100 100 600 300]);\nbrush = d3Brush(fig, 'Position', [50 50 500 200]);\n\n% Animate the brush selection\nranges = [10, 30; 20, 60; 40, 80; 60, 90; 30, 70];\n\nfor i = 1:size(ranges, 1)\n    pause(1);\n    brush.Value = ranges(i, :);\n    fprintf('Selection updated to: [%.1f, %.1f]\\n', brush.Value(1), brush.Value(2));\nend\n</code></pre>"},{"location":"components/d3brush/#error-handling","title":"Error Handling","text":"<p>The component validates all inputs and provides clear error messages:</p> <pre><code>brush = d3Brush(uifigure);\n\n% Invalid value size\ntry\n    brush.Value = 50;  % Single value instead of [start, stop]\ncatch ME\n    disp(ME.identifier);  % 'd3Brush:InvalidValue'\nend\n\n% Values are automatically corrected\nbrush.Value = [80, 20];      % Reversed - automatically sorted\ndisp(brush.Value);           % [20 80]\n\nbrush.Value = [-10, 120];    % Out of range - automatically clamped\ndisp(brush.Value);           % [0 100]\n</code></pre>"},{"location":"components/d3brush/#performance-considerations","title":"Performance Considerations","text":""},{"location":"components/d3brush/#event-throttling","title":"Event Throttling","text":"<p>The <code>ValueChanging</code> event is throttled to ~50ms intervals to prevent performance issues during rapid dragging. This provides smooth visual feedback while keeping MATLAB responsive.</p>"},{"location":"components/d3brush/#update-frequency","title":"Update Frequency","text":"<p>For applications requiring high-frequency updates, consider using only the <code>ValueChanged</code> event:</p> <pre><code>% Only fires on release - more efficient\nbrush.ValueChangedFcn = @(src, event) processData(event.Value);\n</code></pre>"},{"location":"components/d3brush/#browser-compatibility","title":"Browser Compatibility","text":"<p>The d3Brush component uses D3.js v5.9.2 and is compatible with:</p> <ul> <li>Chrome/Edge (latest)</li> <li>Firefox (latest)</li> <li>Safari (latest)</li> </ul>"},{"location":"components/d3brush/#technical-details","title":"Technical Details","text":""},{"location":"components/d3brush/#dependencies","title":"Dependencies","text":"<ul> <li>D3.js Version: 5.9.2 (bundled in <code>vendor/</code>)</li> <li>Event Model: D3 v5 (uses <code>d3.event</code> global)</li> </ul> <p>D3 Version Lock</p> <p>Do not upgrade D3.js without updating event handlers. D3 v6+ uses a different event API that is incompatible with the current implementation.</p>"},{"location":"components/d3brush/#component-files","title":"Component Files","text":"<pre><code>@d3Brush/\n\u251c\u2500\u2500 d3Brush.m              # MATLAB class\n\u251c\u2500\u2500 d3Brush.html           # HTML template\n\u251c\u2500\u2500 d3Brush.css            # Component styles\n\u251c\u2500\u2500 d3Brush.js             # Controller (lifecycle)\n\u251c\u2500\u2500 d3Brush.render.js      # Renderer (D3 visualization)\n\u2514\u2500\u2500 vendor/\n    \u2514\u2500\u2500 d3.v5.9.2.min.js   # Bundled D3.js\n</code></pre>"},{"location":"components/d3brush/#testing","title":"Testing","text":""},{"location":"components/d3brush/#automated-tests","title":"Automated Tests","text":"<p>Run the MATLAB test suite:</p> <pre><code>runtests('test_d3Brush')\n</code></pre>"},{"location":"components/d3brush/#manual-testing","title":"Manual Testing","text":"<p>Use the interactive test script:</p> <pre><code>% Open and run sections individually\nedit('manual_test_d3Brush.m')\n</code></pre> <p>See Testing Guide for more details.</p>"},{"location":"components/d3brush/#troubleshooting","title":"Troubleshooting","text":""},{"location":"components/d3brush/#component-not-rendering","title":"Component Not Rendering","text":"<p>Problem: Brush doesn't appear in the figure.</p> <p>Solutions: 1. Verify component is on MATLAB path: <code>which d3Brush</code> 2. Check HTML file exists: <code>dir('components/@d3Brush/d3Brush.html')</code> 3. Ensure figure is visible: <code>fig.Visible = 'on'</code></p>"},{"location":"components/d3brush/#events-not-firing","title":"Events Not Firing","text":"<p>Problem: Callbacks aren't being triggered.</p> <p>Solutions: 1. Verify callback syntax: <code>@(src, event) yourFunction(event.Value)</code> 2. Check JavaScript console in debug mode (F12 in browser preview) 3. Ensure component is fully loaded before interacting</p>"},{"location":"components/d3brush/#snapping-not-working","title":"Snapping Not Working","text":"<p>Problem: Brush doesn't snap to intervals.</p> <p>Solutions: 1. Check <code>SnapInterval</code> is positive: <code>brush.SnapInterval &gt; 0</code> 2. Verify interval is reasonable for range: <code>(Max - Min) / SnapInterval &gt; 1</code> 3. Try larger snap interval for visual confirmation</p>"},{"location":"components/d3brush/#api-reference","title":"API Reference","text":"<p>For complete API documentation, see: - MATLAB API Reference - JavaScript API Reference</p>"},{"location":"components/d3brush/#examples-repository","title":"Examples Repository","text":"<p>More examples available in: - <code>tests/matlab/manual_test_d3Brush.m</code> - 9 interactive test scenarios - <code>examples/</code> - Additional use cases</p>"},{"location":"components/d3brush/#related-components","title":"Related Components","text":"<ul> <li>More components coming soon!</li> </ul>"},{"location":"components/d3brush/#support","title":"Support","text":"<ul> <li>GitHub Issues</li> <li>Component README</li> </ul>"},{"location":"development/testing/","title":"Testing Guide","text":"<p>Comprehensive testing ensures component reliability and makes development easier. The bioctree UI Library uses a two-tier testing strategy.</p>"},{"location":"development/testing/#testing-strategy","title":"Testing Strategy","text":""},{"location":"development/testing/#1-browser-tests-htmljavascript","title":"1. Browser Tests (HTML/JavaScript)","text":"<p>Test rendering and interaction independently of MATLAB.</p> <p>Location: <code>tests/html/</code></p> <p>Purpose: - Fast iteration during development - Visual debugging with browser DevTools - Test D3.js rendering logic - Validate event dispatching</p>"},{"location":"development/testing/#2-matlab-tests-integration","title":"2. MATLAB Tests (Integration)","text":"<p>Test full component integration with MATLAB.</p> <p>Location: <code>tests/matlab/</code></p> <p>Purpose: - Property validation - MATLAB-JavaScript communication - Event handling - Lifecycle management - Automated regression testing</p>"},{"location":"development/testing/#running-tests","title":"Running Tests","text":""},{"location":"development/testing/#browser-tests","title":"Browser Tests","text":"<ol> <li> <p>Open test file in browser: <pre><code>cd tests/html\n# Open test_d3_brush.html in your browser\n</code></pre></p> </li> <li> <p>Check console for results: <pre><code>[Test 1] \u2713 Component renders successfully\n[Test 2] \u2713 Initial selection is correct\n[Test 3] \u2713 Events dispatch properly\n...\n</code></pre></p> </li> </ol>"},{"location":"development/testing/#matlab-automated-tests","title":"MATLAB Automated Tests","text":"<p>Run all tests: <pre><code>runtests('test_d3Brush')\n</code></pre></p> <p>Run with detailed output: <pre><code>results = runtests('test_d3Brush', 'OutputDetail', 'Detailed')\n</code></pre></p> <p>Run specific test: <pre><code>runtests('test_d3Brush', 'ProcedureName', 'testValuePropertySorting')\n</code></pre></p>"},{"location":"development/testing/#matlab-manual-tests","title":"MATLAB Manual Tests","text":"<p>Interactive visual testing: <pre><code>% Open manual test script\nedit('manual_test_d3Brush.m')\n\n% Run sections individually with Ctrl+Enter\n</code></pre></p>"},{"location":"development/testing/#writing-browser-tests","title":"Writing Browser Tests","text":""},{"location":"development/testing/#test-template","title":"Test Template","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Test Component&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"../../components/@ComponentName/ComponentName.css\"&gt;\n    &lt;script src=\"test-utils.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Component Tests&lt;/h1&gt;\n    &lt;div class=\"component-container\"&gt;&lt;/div&gt;\n\n    &lt;script src=\"../../components/@ComponentName/vendor/d3.v5.9.2.min.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"../../components/@ComponentName/ComponentName.render.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"../../components/@ComponentName/ComponentName.js\"&gt;&lt;/script&gt;\n\n    &lt;script&gt;\n        // Create mock htmlComponent\n        var mockComponent = new MockHTMLComponent();\n\n        // Test 1: Component renders\n        console.log('[Test 1] Testing component render...');\n        mockComponent.Data = {\n            min: 0,\n            max: 100,\n            snapInterval: 5,\n            initialSelection: [20, 60]\n        };\n\n        try {\n            setup(mockComponent);\n            console.log('[Test 1] \u2713 Component renders successfully');\n        } catch (error) {\n            console.error('[Test 1] \u2717 Failed:', error);\n        }\n\n        // Test 2: Event dispatching\n        console.log('[Test 2] Testing event dispatch...');\n        var eventReceived = false;\n        mockComponent.addEventListener('ValueChanged', function(e) {\n            eventReceived = true;\n            console.log('[Test 2] Event data:', JSON.parse(e.detail));\n        });\n\n        // Trigger interaction...\n        setTimeout(function() {\n            if (eventReceived) {\n                console.log('[Test 2] \u2713 Events dispatch correctly');\n            } else {\n                console.error('[Test 2] \u2717 No event received');\n            }\n        }, 1000);\n    &lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"development/testing/#mock-utilities","title":"Mock Utilities","text":"<p>Use <code>test-utils.js</code> for mocking MATLAB's <code>htmlComponent</code>:</p> <pre><code>class MockHTMLComponent {\n    constructor() {\n        this.Data = {};\n        this.listeners = {};\n    }\n\n    addEventListener(event, callback) {\n        if (!this.listeners[event]) {\n            this.listeners[event] = [];\n        }\n        this.listeners[event].push(callback);\n    }\n\n    dispatchEvent(event) {\n        var eventType = event.type;\n        if (this.listeners[eventType]) {\n            this.listeners[eventType].forEach(cb =&gt; cb(event));\n        }\n        console.log('[MockHTMLComponent] Event dispatched:', eventType, event.detail);\n    }\n}\n</code></pre>"},{"location":"development/testing/#writing-matlab-tests","title":"Writing MATLAB Tests","text":""},{"location":"development/testing/#automated-test-template","title":"Automated Test Template","text":"<pre><code>function tests = test_ComponentName()\n    tests = functiontests(localfunctions);\nend\n\nfunction setupOnce(testCase)\n    % Add component to path\n    componentPath = fullfile(fileparts(fileparts(fileparts(mfilename('fullpath')))), 'components');\n    addpath(genpath(componentPath));\nend\n\nfunction setup(testCase)\n    % Create figure for each test\n    testCase.TestData.fig = uifigure('Visible', 'off');\nend\n\nfunction teardown(testCase)\n    % Clean up after each test\n    if isvalid(testCase.TestData.fig)\n        close(testCase.TestData.fig);\n    end\nend\n\nfunction testPropertySetting(testCase)\n    fig = testCase.TestData.fig;\n    comp = ComponentName(fig);\n\n    % Test property\n    comp.SomeProperty = 42;\n    verifyEqual(testCase, comp.SomeProperty, 42);\nend\n\nfunction testPropertyValidation(testCase)\n    fig = testCase.TestData.fig;\n    comp = ComponentName(fig);\n\n    % Test invalid input throws error\n    verifyError(testCase, @() set(comp, 'SomeProperty', 'invalid'), ...\n        'ComponentName:InvalidValue');\nend\n</code></pre>"},{"location":"development/testing/#manual-test-template","title":"Manual Test Template","text":"<pre><code>%% Test Section 1: Basic Functionality\n% Description of what this section tests\n\nfig = uifigure('Position', [100 100 600 300]);\ncomp = ComponentName(fig, 'Position', [50 50 500 200]);\n\n% Configure component\ncomp.SomeProperty = someValue;\n\n% Add callback\ncomp.SomeEventFcn = @(src, event) fprintf('Event fired: %s\\n', event.Type);\n\nfprintf('Test Section 1: Try interacting with the component\\n');\n\n%% Test Section 2: Edge Cases\n% Test specific edge cases\n\n% ... more tests\n</code></pre>"},{"location":"development/testing/#test-coverage-checklist","title":"Test Coverage Checklist","text":""},{"location":"development/testing/#component-creation","title":"Component Creation","text":"<ul> <li> Creates without errors</li> <li> Creates with position specified</li> <li> Creates with initial property values</li> <li> Multiple components in one figure</li> </ul>"},{"location":"development/testing/#property-management","title":"Property Management","text":"<ul> <li> Default values are correct</li> <li> Properties can be set individually</li> <li> Properties can be set during construction</li> <li> Invalid inputs throw appropriate errors</li> <li> Property validation works correctly</li> <li> Dependent properties compute correctly</li> </ul>"},{"location":"development/testing/#property-validation","title":"Property Validation","text":"<ul> <li> Type validation (numeric, string, etc.)</li> <li> Size validation (scalar, array, etc.)</li> <li> Range validation (min/max)</li> <li> Custom validation rules</li> </ul>"},{"location":"development/testing/#events","title":"Events","text":"<ul> <li> Callbacks can be registered</li> <li> Callbacks fire at correct times</li> <li> Event data is correct</li> <li> Multiple callbacks can be registered</li> <li> Callbacks can be changed</li> <li> Callbacks can be cleared</li> </ul>"},{"location":"development/testing/#lifecycle","title":"Lifecycle","text":"<ul> <li> Component initializes correctly</li> <li> Component updates when properties change</li> <li> Component cleans up on deletion</li> <li> No memory leaks (timers, listeners)</li> </ul>"},{"location":"development/testing/#integration","title":"Integration","text":"<ul> <li> Works in regular figures</li> <li> Works in App Designer</li> <li> Works with other MATLAB UI components</li> <li> Multiple instances don't interfere</li> </ul>"},{"location":"development/testing/#edge-cases","title":"Edge Cases","text":"<ul> <li> Empty/null inputs</li> <li> Extreme values (very large/small)</li> <li> Rapid property changes</li> <li> Rapid user interactions</li> <li> Component deletion during interaction</li> </ul>"},{"location":"development/testing/#debugging-tests","title":"Debugging Tests","text":""},{"location":"development/testing/#browser-console","title":"Browser Console","text":"<p>Open browser DevTools (F12) to: - View console logs - Inspect DOM elements - Debug JavaScript - Monitor network requests - Check for errors</p>"},{"location":"development/testing/#matlab-debugger","title":"MATLAB Debugger","text":"<pre><code>% Set breakpoint on error\ndbstop if error\n\n% Run specific test\nruntests('test_d3Brush', 'ProcedureName', 'testValuePropertyClamping')\n\n% Step through code\ndbstep\ndbcont\n</code></pre>"},{"location":"development/testing/#common-issues","title":"Common Issues","text":"<p>Test fails but component works manually: - Check test setup (figure visibility, timing) - Verify test expectations are correct - Add pause() if timing-dependent</p> <p>Component works in tests but not in App Designer: - Verify relative paths (not absolute) - Check component cleanup - Test in actual App Designer environment</p> <p>Events not firing in tests: - Remember: JavaScript events won't fire in automated tests - Use manual tests for interaction verification - Mock event data for unit tests</p>"},{"location":"development/testing/#cicd-integration","title":"CI/CD Integration","text":""},{"location":"development/testing/#github-actions-example","title":"GitHub Actions Example","text":"<pre><code>name: Run Tests\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: windows-latest\n    steps:\n      - uses: actions/checkout@v2\n\n      - name: Setup MATLAB\n        uses: matlab-actions/setup-matlab@v1\n\n      - name: Run MATLAB Tests\n        uses: matlab-actions/run-tests@v1\n        with:\n          test-results-junit: test-results.xml\n\n      - name: Publish Test Results\n        uses: EnricoMi/publish-unit-test-result-action@v1\n        if: always()\n        with:\n          files: test-results.xml\n</code></pre>"},{"location":"development/testing/#test-script-for-ci","title":"Test Script for CI","text":"<pre><code>% run_tests.m\ntry\n    results = runtests('test_d3Brush');\n\n    % Display summary\n    fprintf('\\n=== TEST SUMMARY ===\\n');\n    fprintf('Passed: %d\\n', sum([results.Passed]));\n    fprintf('Failed: %d\\n', sum([results.Failed]));\n    fprintf('Total: %d\\n', length(results));\n\n    % Exit with appropriate code\n    if all([results.Passed])\n        exit(0);\n    else\n        exit(1);\n    end\ncatch ME\n    fprintf('Error running tests: %s\\n', ME.message);\n    exit(1);\nend\n</code></pre>"},{"location":"development/testing/#performance-testing","title":"Performance Testing","text":""},{"location":"development/testing/#stress-testing","title":"Stress Testing","text":"<pre><code>% Test rapid updates\ntic;\nfor i = 1:100\n    comp.Value = [randi([0, 50]), randi([51, 100])];\n    pause(0.01);\nend\nelapsedTime = toc;\n\nfprintf('100 updates in %.2f seconds\\n', elapsedTime);\nfprintf('Average: %.2f ms per update\\n', (elapsedTime/100)*1000);\n</code></pre>"},{"location":"development/testing/#memory-testing","title":"Memory Testing","text":"<pre><code>% Check for memory leaks\nbefore = memory;\n\nfor i = 1:100\n    fig = uifigure('Visible', 'off');\n    comp = d3Brush(fig);\n    close(fig);\nend\n\nafter = memory;\nfprintf('Memory increase: %.2f MB\\n', (after.MemUsedMATLAB - before.MemUsedMATLAB) / 1e6);\n</code></pre>"},{"location":"development/testing/#best-practices","title":"Best Practices","text":"<p>\u2713 Do: - Test both success and failure cases - Use descriptive test names - Keep tests independent - Clean up resources (figures, timers) - Test edge cases - Document expected behavior</p> <p>\u2717 Don't: - Depend on test execution order - Leave figures open after tests - Skip error case testing - Hardcode paths - Forget to test cleanup</p>"},{"location":"development/testing/#next-steps","title":"Next Steps","text":"<ul> <li>Component Structure - Build testable components</li> <li>Contributing Guide - Submit your tests</li> <li>Versioning - Test across versions</li> </ul>"},{"location":"getting-started/architecture/","title":"Architecture","text":"<p>Understanding the bioctree UI Library architecture will help you use components effectively and create your own.</p>"},{"location":"getting-started/architecture/#overview","title":"Overview","text":"<p>The library bridges MATLAB's computational power with D3.js's visualization capabilities through a bidirectional communication pattern.</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      MATLAB Layer                        \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 ComponentContainer (d3Brush.m)                    \u2502  \u2502\n\u2502  \u2502  \u2022 Property Management                            \u2502  \u2502\n\u2502  \u2502  \u2022 Event Handling                                 \u2502  \u2502\n\u2502  \u2502  \u2022 Data Synchronization                           \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                \u2502 HTMLComponent.Data                      \u2502\n\u2502                \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6   \u2502\n\u2502                \u2502 CustomEvent                             \u2502\n\u2502                \u25c0\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2518\n                 \u2502                                     \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2510\n\u2502                \u2502       JavaScript Layer              \u2502   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2510 \u2502\n\u2502  \u2502 Controller (d3Brush.js)                             \u2502 \u2502\n\u2502  \u2502  \u2022 Lifecycle Management                             \u2502 \u2502\n\u2502  \u2502  \u2022 Data Reception                                   \u2502 \u2502\n\u2502  \u2502  \u2022 Event Dispatching                                \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                \u2502 renderBrush(data)                       \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502 Renderer (d3Brush.render.js)                        \u2502 \u2502\n\u2502  \u2502  \u2022 D3.js Visualization                              \u2502 \u2502\n\u2502  \u2502  \u2022 SVG Creation                                     \u2502 \u2502\n\u2502  \u2502  \u2022 Interaction Handling                             \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"getting-started/architecture/#component-structure","title":"Component Structure","text":"<p>Each component follows a standardized file structure:</p> <pre><code>@ComponentName/\n\u251c\u2500\u2500 ComponentName.m          # MATLAB class\n\u251c\u2500\u2500 ComponentName.html       # HTML template\n\u251c\u2500\u2500 ComponentName.css        # Styles\n\u251c\u2500\u2500 ComponentName.js         # Controller\n\u251c\u2500\u2500 ComponentName.render.js  # Renderer\n\u251c\u2500\u2500 ComponentName.utils.js   # Optional utilities\n\u251c\u2500\u2500 vendor/                  # Bundled dependencies\n\u2502   \u2514\u2500\u2500 d3.v5.9.2.min.js\n\u2514\u2500\u2500 README.md               # Documentation\n</code></pre>"},{"location":"getting-started/architecture/#file-responsibilities","title":"File Responsibilities","text":""},{"location":"getting-started/architecture/#1-matlab-class-componentnamem","title":"1. MATLAB Class (<code>ComponentName.m</code>)","text":"<p>Extends <code>matlab.ui.componentcontainer.ComponentContainer</code> and handles:</p> <ul> <li>Property Management: Public properties with validation</li> <li>Lifecycle Methods: <code>setup()</code>, <code>update()</code>, <code>delete()</code></li> <li>Event Handling: Receives CustomEvents from JavaScript</li> <li>Data Synchronization: Updates <code>HTMLComponent.Data</code> structure</li> </ul> <p>Example: <pre><code>classdef d3Brush &lt; matlab.ui.componentcontainer.ComponentContainer\n    properties\n        Min = 0\n        Max = 100\n        Value = [20 60]\n    end\n\n    methods (Access = protected)\n        function setup(comp)\n            comp.HTMLComponent = uihtml(comp);\n            comp.HTMLComponent.HTMLSource = 'd3Brush.html';\n            comp.HTMLComponent.HTMLEventReceivedFcn = @(src, event) ...\n                comp.handleBrushEvent(event);\n            comp.update();\n        end\n\n        function update(comp)\n            comp.HTMLComponent.Data = struct(...\n                'min', comp.Min, ...\n                'max', comp.Max, ...\n                'initialSelection', comp.Value);\n        end\n    end\nend\n</code></pre></p>"},{"location":"getting-started/architecture/#2-html-template-componentnamehtml","title":"2. HTML Template (<code>ComponentName.html</code>)","text":"<p>Loads scripts and defines the container structure:</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;link rel=\"stylesheet\" href=\"ComponentName.css\"&gt;\n    &lt;script src=\"vendor/d3.v5.9.2.min.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div class=\"component-container\"&gt;&lt;/div&gt;\n    &lt;script src=\"ComponentName.render.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"ComponentName.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"getting-started/architecture/#3-controller-componentnamejs","title":"3. Controller (<code>ComponentName.js</code>)","text":"<p>Manages lifecycle and MATLAB communication:</p> <pre><code>function setup(htmlComponent) {\n    // Initial render\n    var data = htmlComponent.Data;\n    renderComponent(data, htmlComponent);\n\n    // Listen for data changes from MATLAB\n    htmlComponent.addEventListener(\"DataChanged\", function(event) {\n        renderComponent(htmlComponent.Data, htmlComponent);\n    });\n}\n</code></pre>"},{"location":"getting-started/architecture/#4-renderer-componentnamerenderjs","title":"4. Renderer (<code>ComponentName.render.js</code>)","text":"<p>Pure D3.js visualization logic:</p> <pre><code>function renderComponent(data, htmlComponent) {\n    // Clear previous render\n    d3.select(\"svg\").remove();\n\n    // Create visualization\n    var svg = d3.select('.component-container')\n        .append('svg');\n\n    // Add D3 interactions\n    // ...\n\n    // Dispatch events back to MATLAB\n    htmlComponent.dispatchEvent(new CustomEvent('ValueChanged', {\n        detail: JSON.stringify({ selection: [start, end] })\n    }));\n}\n</code></pre>"},{"location":"getting-started/architecture/#communication-flow","title":"Communication Flow","text":""},{"location":"getting-started/architecture/#matlab-javascript","title":"MATLAB \u2192 JavaScript","text":"<p>When a property changes in MATLAB:</p> <ol> <li>MATLAB property setter triggers <code>update()</code></li> <li><code>update()</code> packages data into a structure</li> <li>Assigns to <code>HTMLComponent.Data</code></li> <li>JavaScript <code>DataChanged</code> event fires</li> <li>Controller calls renderer with new data</li> </ol> <p>Example: <pre><code>% In MATLAB\nbrush.Max = 200;  % Property change\n\n% Triggers internally:\nfunction update(comp)\n    comp.HTMLComponent.Data = struct('max', comp.Max, ...);\nend\n</code></pre></p> <pre><code>// In JavaScript\nhtmlComponent.addEventListener(\"DataChanged\", function(event) {\n    var data = htmlComponent.Data;  // Receives: {max: 200, ...}\n    renderComponent(data, htmlComponent);\n});\n</code></pre>"},{"location":"getting-started/architecture/#javascript-matlab","title":"JavaScript \u2192 MATLAB","text":"<p>When user interacts with visualization:</p> <ol> <li>D3 event handler fires</li> <li>Controller dispatches CustomEvent</li> <li>Event includes JSON-serialized data</li> <li>MATLAB <code>HTMLEventReceivedFcn</code> receives event</li> <li>MATLAB parses JSON and updates properties</li> <li>MATLAB notifies event listeners</li> </ol> <p>Example: <pre><code>// In JavaScript\nfunction brushed() {\n    var selection = [start, end];\n    htmlComponent.dispatchEvent(new CustomEvent('ValueChanged', {\n        detail: JSON.stringify({ selection: selection })\n    }));\n}\n</code></pre></p> <pre><code>% In MATLAB\nfunction handleBrushEvent(comp, event)\n    eventData = jsondecode(event.HTMLEventData);\n    comp.Value_ = eventData.selection;\n    notify(comp, 'ValueChanged', evtData);\nend\n</code></pre>"},{"location":"getting-started/architecture/#dependency-management","title":"Dependency Management","text":""},{"location":"getting-started/architecture/#component-level-vendoring","title":"Component-Level Vendoring","text":"<p>Each component bundles its own dependencies in a <code>vendor/</code> directory:</p> <pre><code>@d3Brush/\n\u2514\u2500\u2500 vendor/\n    \u2514\u2500\u2500 d3.v5.9.2.min.js\n</code></pre> <p>Benefits: - No version conflicts between components - Explicit version control - Independent component updates - Self-contained distribution</p>"},{"location":"getting-started/architecture/#version-manifest","title":"Version Manifest","text":"<p>Root <code>manifest.json</code> tracks all component dependencies:</p> <pre><code>{\n  \"components\": {\n    \"d3Brush\": {\n      \"version\": \"1.0.0\",\n      \"dependencies\": {\n        \"d3\": \"5.9.2\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/architecture/#event-system","title":"Event System","text":""},{"location":"getting-started/architecture/#event-types","title":"Event Types","text":"<p>Components typically implement:</p> Event Timing Throttled Use Case <code>[Action]Started</code> Interaction begins No Track when user starts <code>ValueChanging</code> During interaction Yes (~50ms) Real-time feedback <code>ValueChanged</code> Interaction completes No Final value processing <code>[Action]Ended</code> Interaction ends No Cleanup/finalization"},{"location":"getting-started/architecture/#event-throttling","title":"Event Throttling","text":"<p>Rapid events (like dragging) are throttled using MATLAB timers:</p> <pre><code>properties (Access = private)\n    ThrottleTimer\n    PendingSelection\nend\n\nmethods\n    function setup(comp)\n        comp.ThrottleTimer = timer(...\n            'ExecutionMode', 'singleShot', ...\n            'StartDelay', 0.05, ...  % 50ms throttle\n            'TimerFcn', @(~,~) comp.processPending());\n    end\n\n    function handleBrushEvent(comp, event)\n        if strcmp(event.HTMLEventName, 'BrushMoving')\n            comp.PendingSelection = eventData.selection;\n            if strcmp(comp.ThrottleTimer.Running, 'on')\n                stop(comp.ThrottleTimer);\n            end\n            start(comp.ThrottleTimer);\n        end\n    end\nend\n</code></pre>"},{"location":"getting-started/architecture/#property-patterns","title":"Property Patterns","text":""},{"location":"getting-started/architecture/#dependent-properties","title":"Dependent Properties","text":"<p>Use dependent properties for computed or validated values:</p> <pre><code>properties (Dependent)\n    Value  % Computed from Value_\nend\n\nproperties (Access = private)\n    Value_ (1,2) double = [20 60]  % Internal storage\nend\n\nmethods\n    function val = get.Value(comp)\n        val = comp.Value_;\n    end\n\n    function set.Value(comp, val)\n        % Validate and transform\n        val = sort(val);  % Ensure start &lt;= stop\n        val = [max(comp.Min, val(1)), min(comp.Max, val(2))];  % Clamp\n        comp.Value_ = val;\n        comp.update();  % Sync to JavaScript\n    end\nend\n</code></pre>"},{"location":"getting-started/architecture/#validation","title":"Validation","text":"<p>Use property validation attributes:</p> <pre><code>properties\n    Min (1,1) double {mustBeFinite, mustBeReal} = 0\n    Max (1,1) double {mustBeFinite, mustBeReal} = 100\n    SnapInterval (1,1) double {mustBeFinite, mustBeReal, mustBePositive} = 5\nend\n</code></pre>"},{"location":"getting-started/architecture/#lifecycle","title":"Lifecycle","text":""},{"location":"getting-started/architecture/#component-lifecycle-stages","title":"Component Lifecycle Stages","text":"<ol> <li>Construction - <code>d3Brush(parent, ...)</code> creates instance</li> <li>Setup - <code>setup()</code> creates HTML component, loads files</li> <li>Initial Update - <code>update()</code> sends initial data to JavaScript</li> <li>Active - Bidirectional communication, event handling</li> <li>Deletion - <code>delete()</code> cleans up timers and resources</li> </ol>"},{"location":"getting-started/architecture/#best-practices","title":"Best Practices","text":"<p>\u2713 Do: - Call <code>update()</code> at the end of <code>setup()</code> - Clean up timers in <code>delete()</code> - Use relative paths for <code>HTMLSource</code> - Validate all property inputs - Throttle rapid events</p> <p>\u2717 Don't: - Set <code>Units</code> or <code>Position</code> on HTML components (not supported) - Use absolute paths (breaks toolbox packaging) - Skip validation (leads to JS errors) - Forget to clean up resources</p>"},{"location":"getting-started/architecture/#testing-architecture","title":"Testing Architecture","text":""},{"location":"getting-started/architecture/#two-tier-testing","title":"Two-Tier Testing","text":"<ol> <li>Browser Tests (<code>tests/html/</code>)</li> <li>Test JavaScript/D3 rendering independently</li> <li>Mock MATLAB's <code>htmlComponent</code> interface</li> <li> <p>Fast iteration, visual debugging</p> </li> <li> <p>MATLAB Tests (<code>tests/matlab/</code>)</p> </li> <li>Integration testing with full stack</li> <li>Property validation</li> <li>Event handling</li> <li>Lifecycle management</li> </ol>"},{"location":"getting-started/architecture/#extensibility","title":"Extensibility","text":""},{"location":"getting-started/architecture/#creating-new-components","title":"Creating New Components","text":"<p>Follow the established patterns:</p> <ol> <li>Create <code>@ComponentName/</code> directory</li> <li>Implement MATLAB class extending <code>ComponentContainer</code></li> <li>Create HTML template (no inline scripts)</li> <li>Separate controller (lifecycle) from renderer (visualization)</li> <li>Bundle component-specific dependencies in <code>vendor/</code></li> <li>Update <code>manifest.json</code></li> <li>Create tests (both HTML and MATLAB)</li> <li>Document in <code>docs/components/</code></li> </ol> <p>See Component Structure Guide for detailed instructions.</p>"},{"location":"getting-started/architecture/#next-steps","title":"Next Steps","text":"<ul> <li>Component Structure Guide - Build components</li> <li>Testing Guide - Write tests</li> <li>Versioning Guide - Manage dependencies</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>Get started with the bioctree UI Library in just a few steps.</p>"},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>MATLAB R2020b or later - Required for <code>ComponentContainer</code> support</li> <li>Modern web browser - For component rendering (Chrome, Firefox, Safari, or Edge)</li> <li>Git (optional) - For cloning the repository</li> </ul>"},{"location":"getting-started/installation/#installation-methods","title":"Installation Methods","text":""},{"location":"getting-started/installation/#method-1-clone-from-github-recommended","title":"Method 1: Clone from GitHub (Recommended)","text":"<pre><code>git clone https://github.com/DiellorBasha/bioctree-ui-library.git\ncd bioctree-ui-library\n</code></pre> <p>Then in MATLAB:</p> <pre><code>% Add components to path\naddpath(genpath('components'));\n\n% Verify installation\nwhich d3Brush\n</code></pre>"},{"location":"getting-started/installation/#method-2-download-zip","title":"Method 2: Download ZIP","text":"<ol> <li>Download the latest release</li> <li>Extract the ZIP file to your desired location</li> <li>Add to MATLAB path:</li> </ol> <pre><code>addpath(genpath('path/to/bioctree-ui-library/components'));\nsavepath;  % Optional: Save path permanently\n</code></pre>"},{"location":"getting-started/installation/#method-3-matlab-toolbox-coming-soon","title":"Method 3: MATLAB Toolbox (Coming Soon)","text":"<p>A packaged MATLAB toolbox will be available for easy installation via MATLAB's Add-On Manager.</p>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<p>Test that everything is working:</p> <pre><code>% Create a test figure\nfig = uifigure('Position', [100 100 600 300]);\n\n% Create a d3Brush component\nbrush = d3Brush(fig, 'Position', [50 50 500 200]);\n\n% If the brush appears, installation was successful!\n</code></pre>"},{"location":"getting-started/installation/#project-structure","title":"Project Structure","text":"<p>After installation, you'll have:</p> <pre><code>bioctree-ui-library/\n\u251c\u2500\u2500 components/           # Component implementations\n\u2502   \u2514\u2500\u2500 @d3Brush/        # d3Brush component\n\u251c\u2500\u2500 lib/                 # Shared libraries\n\u2502   \u251c\u2500\u2500 d3/             # D3.js versions\n\u2502   \u2514\u2500\u2500 assets/         # Shared resources\n\u251c\u2500\u2500 tests/              # Test suites\n\u2502   \u251c\u2500\u2500 html/           # Browser tests\n\u2502   \u2514\u2500\u2500 matlab/         # MATLAB tests\n\u251c\u2500\u2500 docs/               # Documentation source\n\u251c\u2500\u2500 manifest.json       # Dependency manifest\n\u2514\u2500\u2500 README.md           # Project overview\n</code></pre>"},{"location":"getting-started/installation/#path-configuration","title":"Path Configuration","text":""},{"location":"getting-started/installation/#temporary-path-session-only","title":"Temporary Path (Session Only)","text":"<p>Add components for the current MATLAB session:</p> <pre><code>addpath(genpath('path/to/bioctree-ui-library/components'));\n</code></pre>"},{"location":"getting-started/installation/#permanent-path","title":"Permanent Path","text":"<p>Save the path permanently:</p> <pre><code>addpath(genpath('path/to/bioctree-ui-library/components'));\nsavepath;\n</code></pre>"},{"location":"getting-started/installation/#startup-script","title":"Startup Script","text":"<p>Add to your <code>startup.m</code> file:</p> <pre><code>% startup.m\naddpath(genpath('path/to/bioctree-ui-library/components'));\n</code></pre>"},{"location":"getting-started/installation/#updating","title":"Updating","text":""},{"location":"getting-started/installation/#git-users","title":"Git Users","text":"<pre><code>cd bioctree-ui-library\ngit pull origin main\n</code></pre>"},{"location":"getting-started/installation/#zip-users","title":"ZIP Users","text":"<ol> <li>Download the latest release</li> <li>Replace your existing files</li> <li>Clear MATLAB's class cache: <code>clear classes</code></li> <li>Restart MATLAB if you experience issues</li> </ol>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/installation/#component-not-found","title":"Component Not Found","text":"<p>Error: <code>Undefined function or variable 'd3Brush'</code></p> <p>Solution: <pre><code>% Check if path is set\nwhich d3Brush\n\n% If empty, add to path\naddpath(genpath('path/to/bioctree-ui-library/components'));\n</code></pre></p>"},{"location":"getting-started/installation/#html-file-not-found","title":"HTML File Not Found","text":"<p>Error: <code>Unable to load HTML file</code></p> <p>Solution: - Ensure the entire component folder structure is intact - Verify <code>d3Brush.html</code> exists in <code>components/@d3Brush/</code> - Check file permissions</p>"},{"location":"getting-started/installation/#class-definition-issues","title":"Class Definition Issues","text":"<p>Error: <code>Unable to reload class definition</code></p> <p>Solution: <pre><code>% Clear class cache\nclear classes\n\n% If that doesn't work, restart MATLAB\n</code></pre></p>"},{"location":"getting-started/installation/#version-conflicts","title":"Version Conflicts","text":"<p>Error: Issues with existing D3.js or conflicting libraries</p> <p>Solution: - Each component bundles its own D3.js version in <code>vendor/</code> - Check <code>manifest.json</code> for version information - Avoid adding global D3.js to the MATLAB path</p>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<p>Now that you're set up, continue with:</p> <ul> <li>Quick Start Guide - Build your first component</li> <li>Architecture Overview - Understand the design</li> <li>d3Brush Documentation - Explore the first component</li> </ul>"},{"location":"getting-started/installation/#getting-help","title":"Getting Help","text":"<ul> <li>Documentation: This site</li> <li>Examples: <code>tests/matlab/manual_test_d3Brush.m</code></li> <li>Issues: GitHub Issues</li> </ul>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":"<p>Get up and running with the bioctree UI Library in 5 minutes.</p>"},{"location":"getting-started/quick-start/#your-first-component","title":"Your First Component","text":"<p>Let's create a simple interactive brush component:</p> <pre><code>% 1. Create a figure\nfig = uifigure('Position', [100 100 600 300], 'Name', 'My First Brush');\n\n% 2. Create a d3Brush component\nbrush = d3Brush(fig, 'Position', [50 50 500 200]);\n\n% 3. Configure properties\nbrush.Min = 0;\nbrush.Max = 100;\nbrush.SnapInterval = 5;\nbrush.Value = [20, 60];\n\n% 4. Add a callback\nbrush.ValueChangedFcn = @(src, event) fprintf('Selection: [%.1f, %.1f]\\n', ...\n    event.Value(1), event.Value(2));\n</code></pre> <p>That's it! Drag the brush handles to see it in action.</p>"},{"location":"getting-started/quick-start/#understanding-the-code","title":"Understanding the Code","text":""},{"location":"getting-started/quick-start/#step-1-create-a-figure","title":"Step 1: Create a Figure","text":"<pre><code>fig = uifigure('Position', [100 100 600 300], 'Name', 'My First Brush');\n</code></pre> <ul> <li>Use <code>uifigure</code> (not <code>figure</code>) for App Designer compatibility</li> <li>Position: <code>[x y width height]</code> in pixels</li> <li>Name appears in the window title bar</li> </ul>"},{"location":"getting-started/quick-start/#step-2-create-the-component","title":"Step 2: Create the Component","text":"<pre><code>brush = d3Brush(fig, 'Position', [50 50 500 200]);\n</code></pre> <ul> <li>First argument: parent figure</li> <li>Position: <code>[x y width height]</code> relative to parent</li> <li>Component automatically fills its bounding box</li> </ul>"},{"location":"getting-started/quick-start/#step-3-configure-properties","title":"Step 3: Configure Properties","text":"<pre><code>brush.Min = 0;              % Minimum value\nbrush.Max = 100;            % Maximum value\nbrush.SnapInterval = 5;     % Snap to multiples of 5\nbrush.Value = [20, 60];     % Initial selection\n</code></pre> <p>Properties can be set individually or during construction:</p> <pre><code>brush = d3Brush(fig, ...\n    'Position', [50 50 500 200], ...\n    'Min', 0, ...\n    'Max', 100, ...\n    'SnapInterval', 5, ...\n    'Value', [20, 60]);\n</code></pre>"},{"location":"getting-started/quick-start/#step-4-add-callbacks","title":"Step 4: Add Callbacks","text":"<pre><code>brush.ValueChangedFcn = @(src, event) fprintf('Selection: [%.1f, %.1f]\\n', ...\n    event.Value(1), event.Value(2));\n</code></pre> <ul> <li>Callback receives <code>src</code> (component) and <code>event</code> (event data)</li> <li>Access new value: <code>event.Value</code></li> <li>Access previous value: <code>event.PreviousValue</code></li> </ul>"},{"location":"getting-started/quick-start/#interactive-example","title":"Interactive Example","text":"<p>Try this complete example:</p> <pre><code>% Create the UI\nfig = uifigure('Position', [100 100 600 400], 'Name', 'Interactive Example');\n\n% Create brush\nbrush = d3Brush(fig, 'Position', [50 250 500 120]);\nbrush.Min = 0;\nbrush.Max = 100;\nbrush.SnapInterval = 1;\nbrush.Value = [25, 75];\n\n% Create display label\nlabel = uilabel(fig, 'Position', [50 200 500 30], ...\n    'Text', sprintf('Current Selection: [%.0f, %.0f]', brush.Value(1), brush.Value(2)), ...\n    'FontSize', 14, ...\n    'FontWeight', 'bold');\n\n% Create status label\nstatusLabel = uilabel(fig, 'Position', [50 160 500 30], ...\n    'Text', 'Drag the brush handles', ...\n    'FontSize', 12);\n\n% Update display on value change\nbrush.ValueChangedFcn = @(src, event) updateDisplay(label, statusLabel, event);\n\nfunction updateDisplay(label, statusLabel, event)\n    label.Text = sprintf('Current Selection: [%.0f, %.0f]', ...\n        event.Value(1), event.Value(2));\n    statusLabel.Text = sprintf('Range: %.0f units (from %.0f to %.0f)', ...\n        event.Value(2) - event.Value(1), event.Value(1), event.Value(2));\nend\n</code></pre>"},{"location":"getting-started/quick-start/#common-patterns","title":"Common Patterns","text":""},{"location":"getting-started/quick-start/#read-current-value","title":"Read Current Value","text":"<pre><code>currentSelection = brush.Value;\nstartValue = currentSelection(1);\nendValue = currentSelection(2);\n</code></pre>"},{"location":"getting-started/quick-start/#update-programmatically","title":"Update Programmatically","text":"<pre><code>% Set new selection\nbrush.Value = [30, 70];\n\n% Animate selection\nfor i = 1:10\n    brush.Value = [i*5, 100-i*5];\n    pause(0.1);\nend\n</code></pre>"},{"location":"getting-started/quick-start/#multiple-events","title":"Multiple Events","text":"<pre><code>% Track all interaction stages\nbrush.BrushStartedFcn = @(src, ~) disp('Started');\nbrush.ValueChangingFcn = @(src, event) fprintf('Dragging: [%.1f, %.1f]\\n', ...\n    event.Value(1), event.Value(2));\nbrush.ValueChangedFcn = @(src, event) fprintf('Final: [%.1f, %.1f]\\n', ...\n    event.Value(1), event.Value(2));\nbrush.BrushEndedFcn = @(src, ~) disp('Ended');\n</code></pre>"},{"location":"getting-started/quick-start/#error-handling","title":"Error Handling","text":"<pre><code>% Values are automatically validated\nbrush.Value = [80, 20];      % Reversed \u2192 automatically sorted to [20, 80]\nbrush.Value = [-10, 120];    % Out of range \u2192 clamped to [0, 100]\n\n% Invalid inputs throw errors\ntry\n    brush.Value = 50;        % Single value instead of [start, stop]\ncatch ME\n    disp(['Error: ' ME.message]);\nend\n</code></pre>"},{"location":"getting-started/quick-start/#multiple-components","title":"Multiple Components","text":"<p>Create multiple brushes in one figure:</p> <pre><code>fig = uifigure('Position', [100 100 600 500], 'Name', 'Multiple Brushes');\n\n% Top brush - Age range\nageBrush = d3Brush(fig, 'Position', [50 350 500 100]);\nageBrush.Min = 0;\nageBrush.Max = 100;\nageBrush.Value = [25, 65];\n\nuilabel(fig, 'Position', [50 460 200 20], 'Text', 'Age Range:', ...\n    'FontWeight', 'bold');\n\n% Bottom brush - Income range\nincomeBrush = d3Brush(fig, 'Position', [50 150 500 100]);\nincomeBrush.Min = 0;\nincomeBrush.Max = 200000;\nincomeBrush.SnapInterval = 5000;\nincomeBrush.Value = [30000, 100000];\n\nuilabel(fig, 'Position', [50 260 200 20], 'Text', 'Income Range:', ...\n    'FontWeight', 'bold');\n\n% Combined output\noutput = uilabel(fig, 'Position', [50 80 500 40], ...\n    'Text', 'Adjust the brushes above', ...\n    'FontSize', 12);\n\nupdateOutput = @(~, ~) set(output, 'Text', sprintf(...\n    'Age: %.0f-%.0f years, Income: $%,d-$%,d', ...\n    ageBrush.Value(1), ageBrush.Value(2), ...\n    round(incomeBrush.Value(1)), round(incomeBrush.Value(2))));\n\nageBrush.ValueChangedFcn = updateOutput;\nincomeBrush.ValueChangedFcn = updateOutput;\n</code></pre>"},{"location":"getting-started/quick-start/#app-designer-integration","title":"App Designer Integration","text":"<p>Use components in App Designer:</p> <ol> <li>Add a Panel to your app</li> <li>Create the component in <code>startupFcn</code>:</li> </ol> <pre><code>function startupFcn(app)\n    % Create d3Brush in Panel\n    app.Brush = d3Brush(app.Panel, 'Position', [10 10 580 200]);\n    app.Brush.Min = 0;\n    app.Brush.Max = 100;\n    app.Brush.ValueChangedFcn = @(src, event) app.brushValueChanged(event);\nend\n\nfunction brushValueChanged(app, event)\n    % Handle brush value changes\n    app.SelectionLabel.Text = sprintf('[%.1f, %.1f]', ...\n        event.Value(1), event.Value(2));\nend\n</code></pre>"},{"location":"getting-started/quick-start/#next-steps","title":"Next Steps","text":"<p>Now that you understand the basics:</p> <ul> <li>Architecture Overview - Learn how components work</li> <li>d3Brush Documentation - Explore all features</li> <li>Advanced Examples - Complex use cases</li> <li>Development Guide - Create your own components</li> </ul>"},{"location":"getting-started/quick-start/#quick-reference","title":"Quick Reference","text":""},{"location":"getting-started/quick-start/#properties","title":"Properties","text":"<ul> <li><code>Min</code> - Minimum value (default: 0)</li> <li><code>Max</code> - Maximum value (default: 100)</li> <li><code>SnapInterval</code> - Snap increment (default: 5)</li> <li><code>Value</code> - Current selection <code>[start, stop]</code> (default: [20, 60])</li> </ul>"},{"location":"getting-started/quick-start/#events","title":"Events","text":"<ul> <li><code>BrushStarted</code> - Interaction begins</li> <li><code>ValueChanging</code> - During drag (throttled)</li> <li><code>ValueChanged</code> - On release</li> <li><code>BrushEnded</code> - Interaction ends</li> </ul>"},{"location":"getting-started/quick-start/#methods","title":"Methods","text":"<ul> <li>Read: <code>value = brush.Value</code></li> <li>Write: <code>brush.Value = [20, 60]</code></li> </ul> <p>Ready to build? Start with the examples!</p>"}]}