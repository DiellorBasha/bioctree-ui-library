<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Component Test Template</title>
    
    <!-- Load D3 library -->
    <script src="../../lib/d3/d3.min.js"></script>
    
    <!-- Load Test Utilities -->
    <script src="./test-utils.js"></script>
    
    <!-- Load component CSS -->
    <!-- <link rel="stylesheet" href="../../controllers/@ComponentName/component_name.css"> -->
    
    <!-- Load component rendering script -->
    <!-- <script src="../../controllers/@ComponentName/component_name_rendering.js"></script> -->
    
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .test-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .test-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .test-description {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
        }
        
        .component-container {
            width: 100%;
            height: 200px;
            border: 1px solid #ddd;
            margin-bottom: 15px;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .control-group label {
            font-size: 12px;
            color: #666;
        }
        
        .control-group input,
        .control-group button {
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .control-group button {
            background: #007bff;
            color: white;
            border: none;
            cursor: pointer;
        }
        
        .control-group button:hover {
            background: #0056b3;
        }
        
        .event-log {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        
        .event-log-entry {
            padding: 2px 0;
            border-bottom: 1px solid #eee;
        }
        
        .event-log-entry:last-child {
            border-bottom: none;
        }
        
        .event-type {
            font-weight: bold;
            color: #007bff;
        }
        
        .test-status {
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-weight: bold;
        }
        
        .test-status.pass {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .test-status.fail {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <h1>Component Name - Browser Tests</h1>
    <p>Open the browser console (F12) for detailed logs and debugging.</p>
    
    <!-- Test 1: Basic Rendering -->
    <div class="test-container">
        <div class="test-title">Test 1: Basic Rendering</div>
        <div class="test-description">Verify component renders with default values</div>
        <div id="component1" class="component-container"></div>
        <div class="controls">
            <button onclick="runTest1()">Run Test</button>
            <button onclick="TestLogger.clear('log1')">Clear Log</button>
        </div>
        <div id="test1-status"></div>
        <div id="log1" class="event-log"></div>
    </div>
    
    <!-- Test 2: Property Updates -->
    <div class="test-container">
        <div class="test-title">Test 2: Dynamic Property Updates</div>
        <div class="test-description">Test updating component properties</div>
        <div id="component2" class="component-container"></div>
        <div class="controls">
            <!-- Add property controls here -->
            <button onclick="updateComponent2()">Update Properties</button>
            <button onclick="TestLogger.clear('log2')">Clear Log</button>
        </div>
        <div id="log2" class="event-log"></div>
    </div>
    
    <!-- Test 3: Event Handling -->
    <div class="test-container">
        <div class="test-title">Test 3: Event Handling</div>
        <div class="test-description">Interact with the component to test events</div>
        <div id="component3" class="component-container"></div>
        <div class="controls">
            <button onclick="TestLogger.clear('log3')">Clear Log</button>
        </div>
        <div id="log3" class="event-log"></div>
    </div>
    
    <!-- Test 4: Edge Cases -->
    <div class="test-container">
        <div class="test-title">Test 4: Edge Cases & Validation</div>
        <div class="test-description">Test invalid data and boundary conditions</div>
        <div id="component4" class="component-container"></div>
        <div class="controls">
            <button onclick="testEdgeCase('null')">Test Null Data</button>
            <button onclick="testEdgeCase('invalid')">Test Invalid Data</button>
            <button onclick="TestLogger.clear('log4')">Clear Log</button>
        </div>
        <div id="test4-status"></div>
        <div id="log4" class="event-log"></div>
    </div>

    <script>
        console.log('[Test Suite] Initializing component tests...');
        
        // Store component instances
        let components = {};
        
        // Test 1: Basic Rendering
        function runTest1() {
            const logId = 'log1';
            const statusId = 'test1-status';
            
            TestLogger.logMessage(logId, 'Starting Test 1: Basic Rendering', 'info');
            TestStatus.clear(statusId);
            
            try {
                // Create mock component
                const mockComponent = new MockHTMLComponent('component1', logId);
                components.test1 = mockComponent;
                
                // Create test data
                const data = TestDataGenerator.validBrushData(); // Adjust for your component
                
                TestLogger.logMessage(logId, `Calling render with data: ${JSON.stringify(data)}`, 'info');
                
                // Call your component's render function
                // renderComponent(data, mockComponent);
                
                // Validate rendering
                if (TestValidators.svgExists('component1')) {
                    TestLogger.logMessage(logId, '✓ Component rendered successfully', 'success');
                    TestStatus.pass(statusId, 'Test 1 PASSED');
                } else {
                    TestLogger.logMessage(logId, '✗ Component failed to render', 'error');
                    TestStatus.fail(statusId, 'Test 1 FAILED');
                }
            } catch (error) {
                TestLogger.logMessage(logId, `✗ Error: ${error.message}`, 'error');
                TestStatus.fail(statusId, 'Test 1 FAILED');
                console.error(error);
            }
        }
        
        // Test 2: Property Updates
        function initComponent2() {
            const logId = 'log2';
            const mockComponent = new MockHTMLComponent('component2', logId);
            components.test2 = mockComponent;
            
            const data = TestDataGenerator.validBrushData(); // Adjust for your component
            // renderComponent(data, mockComponent);
            
            TestLogger.logMessage(logId, 'Component 2 initialized', 'info');
        }
        
        function updateComponent2() {
            const logId = 'log2';
            
            // Get values from controls
            // const newData = { ... };
            
            // TestLogger.logMessage(logId, `Updating component with: ${JSON.stringify(newData)}`, 'info');
            // renderComponent(newData, components.test2);
        }
        
        // Test 3: Event Handling
        function initComponent3() {
            const logId = 'log3';
            const mockComponent = new MockHTMLComponent('component3', logId);
            components.test3 = mockComponent;
            
            const data = TestDataGenerator.validBrushData(); // Adjust for your component
            // renderComponent(data, mockComponent);
            
            TestLogger.logMessage(logId, 'Component 3 initialized. Try interacting!', 'info');
        }
        
        // Test 4: Edge Cases
        function testEdgeCase(caseType) {
            const logId = 'log4';
            const statusId = 'test4-status';
            
            TestLogger.logMessage(logId, `Testing edge case: ${caseType}...`, 'info');
            TestStatus.clear(statusId);
            
            try {
                const mockComponent = new MockHTMLComponent('component4', logId);
                
                let data;
                switch(caseType) {
                    case 'null':
                        data = null;
                        break;
                    case 'invalid':
                        data = TestDataGenerator.invalidBrushData('invalidRange');
                        break;
                    default:
                        data = {};
                }
                
                // renderComponent(data, mockComponent);
                
                TestLogger.logMessage(logId, `✓ Edge case '${caseType}' handled gracefully`, 'success');
                TestStatus.pass(statusId, `Edge case '${caseType}' handled`);
            } catch (error) {
                TestLogger.logMessage(logId, `✗ Error: ${error.message}`, 'error');
                TestStatus.fail(statusId, `Edge case '${caseType}' failed`);
                console.error(error);
            }
        }
        
        // Initialize tests on page load
        window.addEventListener('load', function() {
            console.log('[Test Suite] Page loaded, initializing tests...');
            initComponent2();
            initComponent3();
            console.log('[Test Suite] Tests initialized. Use buttons to run tests.');
        });
    </script>
</body>
</html>
